# GitHub Actions - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π

## üöÄ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç

–ü—Ä–∏ –∫–∞–∂–¥–æ–º –ø—É—à–µ –≤ –≤–µ—Ç–∫—É `main`:
1. ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã Go
2. üî® –°–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç
3. üöÄ –î–µ–ø–ª–æ–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä —á–µ—Ä–µ–∑ SSH

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –î–æ–±–∞–≤—å—Ç–µ Secrets –≤ GitHub

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí Secrets and variables ‚Üí Actions –∏ –¥–æ–±–∞–≤—å—Ç–µ:

| Secret | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|--------|----------|--------|
| `SERVER_HOST` | IP –∏–ª–∏ –¥–æ–º–µ–Ω —Å–µ—Ä–≤–µ—Ä–∞ | `123.45.67.89` –∏–ª–∏ `myserver.com` |
| `SERVER_USER` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è SSH | `root` –∏–ª–∏ `deploy` |
| `SSH_PRIVATE_KEY` | –ü—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á | –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `~/.ssh/id_rsa` |
| `SERVER_PORT` | –ü–æ—Ä—Ç SSH (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) | `22` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) |
| `PROJECT_PATH` | –ü—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) | `/opt/labracodabrador` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) |

### 2. –°–æ–∑–¥–∞–π—Ç–µ SSH –∫–ª—é—á (–µ—Å–ª–∏ –Ω–µ—Ç)

–ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:
```bash
ssh-keygen -t rsa -b 4096 -C "deploy@labracodabrador"
```

### 3. –î–æ–±–∞–≤—å—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
ssh-copy-id -i ~/.ssh/id_rsa.pub user@your-server
```

–ò–ª–∏ –≤—Ä—É—á–Ω—É—é:
```bash
cat ~/.ssh/id_rsa.pub | ssh user@your-server "mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys"
```

### 4. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –≤ GitHub Secrets

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
cat ~/.ssh/id_rsa
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –≤—ã–≤–æ–¥ (–≤–∫–ª—é—á–∞—è `-----BEGIN` –∏ `-----END`) –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ GitHub Secret `SSH_PRIVATE_KEY`.

### 5. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Å–µ—Ä–≤–µ—Ä

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- Git
- Docker
- Docker Compose

–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
```bash
cd /opt
git clone https://github.com/nn-selin/labracodabrador.git
cd labracodabrador
```

### 6. –ì–æ—Ç–æ–≤–æ! üéâ

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø—É—à–µ –≤ `main` –ø—Ä–æ–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä!

## üìù –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

```bash
# –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add .
git commit -m "Update feature"
git push origin main

# –°–ª–µ–¥–∏—Ç–µ –∑–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–º –Ω–∞ GitHub:
# https://github.com/nn-selin/labracodabrador/actions
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ø–ª–æ—è

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç:
```bash
ssh user@your-server
cd /opt/labracodabrador
docker ps  # –î–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
curl http://localhost:8081/health  # API –¥–æ–ª–∂–Ω–æ –æ—Ç–≤–µ—á–∞—Ç—å
```

## ‚ö†Ô∏è Troubleshooting

### SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª—é—á –ª–æ–∫–∞–ª—å–Ω–æ
ssh -i ~/.ssh/id_rsa user@your-server

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
chmod 700 ~/.ssh
chmod 600 ~/.ssh/authorized_keys
```

### Docker –∫–æ–º–∞–Ω–¥—ã —Ç—Ä–µ–±—É—é—Ç sudo
–î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker:
```bash
sudo usermod -aG docker $USER
# –ü–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å
```

### Git pull —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é
–ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSH –¥–ª—è GitHub –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
ssh-keygen -t rsa
cat ~/.ssh/id_rsa.pub
# –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ GitHub Settings ‚Üí SSH Keys
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS —Å —Ç–æ–∫–µ–Ω–æ–º:
```bash
git remote set-url origin https://TOKEN@github.com/nn-selin/labracodabrador.git
```
