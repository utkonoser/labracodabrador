# üöÄ Quick Start: Production Deployment

## –ö—Ä–∞—Ç–∫–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

### üìã –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π)

‚úÖ **–•—Ä–∞–Ω–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** - Geth –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –±–ª–æ–∫–∏ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö `/data/geth/chaindata`

‚úÖ **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** - 3 signer –Ω–æ–¥—ã —Å Clique PoA –∫–æ–Ω—Å–µ–Ω—Å—É—Å–æ–º

‚úÖ **Load Balancing** - Nginx —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç RPC –∑–∞–ø—Ä–æ—Å—ã

‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - Prometheus + Grafana –≥–æ—Ç–æ–≤—ã

### üî• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞

#### 1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

```bash
# –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç–µ keystore –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
mkdir -p /secure/ethereum/keystore
mv signer*-init/keystore/* /secure/ethereum/keystore/

# –û–±–Ω–æ–≤–∏—Ç–µ docker-compose.yml:
# volumes:
#   - /secure/ethereum/keystore/signer1:/data/keystore

# –î–æ–±–∞–≤—å—Ç–µ –≤ .gitignore (—É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ):
# password.txt
# signer*-init/keystore/*
```

#### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±—ç–∫–∞–ø—ã

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ crontab:
0 3 * * * /opt/labracodabrador/scripts/backup-blockchain.sh >> /var/log/blockchain-backup.log 2>&1

# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±—ç–∫–∞–ø–æ–≤:
mkdir -p /backup/ethereum
```

#### 3. Health Check

```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ crontab –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:
*/5 * * * * /opt/labracodabrador/scripts/health-check.sh || echo "Health check failed"
```

### üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
./scripts/health-check.sh

# –ë—ç–∫–∞–ø
./scripts/backup-blockchain.sh

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
./scripts/restore-blockchain.sh /backup/ethereum/blockchain-backup-TIMESTAMP.tar.gz

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f signer1

# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –Ω–æ–¥
docker-compose ps

# –¢–µ–∫—É—â–∏–π –±–ª–æ–∫
curl -s http://localhost:8545 -X POST -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}' | jq

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∏—Ä–æ–≤
curl -s http://localhost:8545 -X POST -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","method":"net_peerCount","params":[],"id":1}' | jq
```

### üåê Production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

#### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

- **CPU:** 4 cores (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 8)
- **RAM:** 8 GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 16 GB)
- **Disk:** 100 GB SSD (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 500 GB+)
- **Network:** 1 Gbps

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall

```bash
# UFW (Ubuntu)
ufw allow 22/tcp    # SSH
ufw allow 8545/tcp  # RPC (–æ–≥—Ä–∞–Ω–∏—á—å—Ç–µ IP)
ufw allow 30303     # P2P
ufw enable

# iptables (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
iptables -A INPUT -p tcp --dport 8545 -s YOUR_TRUSTED_IP -j ACCEPT
iptables -A INPUT -p tcp --dport 8545 -j DROP
```

#### SSL/TLS –¥–ª—è RPC (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ü–æ–ª—É—á–∏—Ç–µ Let's Encrypt —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
certbot certonly --standalone -d your-domain.com

# –û–±–Ω–æ–≤–∏—Ç–µ nginx.conf –¥–ª—è HTTPS
# (—Å–º. PRODUCTION.md)
```

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- **Grafana:** http://your-domain:3000 (admin/admin)
- **Prometheus:** http://your-domain:9090
- **Metrics endpoint:** http://localhost:6060/debug/metrics

### üîç Troubleshooting

#### –ü—Ä–æ–±–ª–µ–º–∞: –ù–æ–¥—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç –±–ª–æ–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs -f signer1 | grep -i error

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∏—Ä—ã
curl -s http://localhost:8545 -X POST -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","method":"admin_peers","params":[],"id":1}' | jq
```

#### –ü—Ä–æ–±–ª–µ–º–∞: RPC –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose ps

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ RPC –Ω–æ–¥—ã
docker-compose restart rpc1 rpc2

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ nginx
docker-compose logs nginx
```

#### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ö–≤–∞—Ç–∫–∞ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
df -h

# –û—á–∏—Å—Ç–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏
docker-compose logs --tail=1000 > /dev/null

# –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã
find /backup/ethereum -name "*.tar.gz" -mtime +30 -delete
```

### üìù –ß–µ–∫-–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

- [ ] Keystore —Ñ–∞–π–ª—ã –∑–∞—â–∏—â–µ–Ω—ã (–Ω–µ –≤ Git!)
- [ ] –ü–∞—Ä–æ–ª–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ
- [ ] Firewall –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] SSL/TLS –¥–ª—è RPC (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø –∏–∑–≤–Ω–µ)
- [ ] –ë—ç–∫–∞–ø—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Health checks –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] Disaster recovery –ø–ª–∞–Ω –≥–æ—Ç–æ–≤
- [ ] –ê–ª–µ—Ä—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (Slack/Email)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

### üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –ø–æ–ª–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é: **[PRODUCTION.md](./PRODUCTION.md)**
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–æ–≥–ª–∞—Å–Ω–æ —á–µ–∫-–ª–∏—Å—Ç—É
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ health-check –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±—ç–∫–∞–ø—ã
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã
6. –ü—Ä–æ–≤–µ–¥–∏—Ç–µ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
7. –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ disaster recovery –ø–ª–∞–Ω

### üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [PRODUCTION.md](./PRODUCTION.md) - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø—Ä–æ–¥–∞–∫—à–Ω—É
- [README.md](./README.md) - –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [Geth Documentation](https://geth.ethereum.org/docs)
- [Clique PoA](https://geth.ethereum.org/docs/fundamentals/consensus)

---

## üí° –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### –û —Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

**Geth –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ö—Ä–∞–Ω–∏—Ç:**
- ‚úÖ –í—Å–µ –±–ª–æ–∫–∏ –≤ `/data/geth/chaindata/ancient/chain`
- ‚úÖ –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –∫–∞–∂–¥–æ–º –±–ª–æ–∫–µ
- ‚úÖ State database (–±–∞–ª–∞–Ω—Å—ã –∞–∫–∫–∞—É–Ω—Ç–æ–≤)
- ‚úÖ Transaction index –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

**–í–∞–º –ù–ï –Ω—É–∂–Ω–æ:**
- ‚ùå –°–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚ùå –ü–∏—Å–∞—Ç—å –∫–æ–¥ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚ùå –£–ø—Ä–∞–≤–ª—è—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤—Ä—É—á–Ω—É—é

**–ß—Ç–æ –≤—ã –ú–û–ñ–ï–¢–ï —Å–¥–µ–ª–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:**
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å BlockScout –¥–ª—è web explorer
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É
- ‚úÖ –°–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ç–æ—Ä –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è

```yaml
# –í docker-compose.yml –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
--gcmode=archive      # –•—Ä–∞–Ω–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
--txlookuplimit=0     # –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
--cache=2048          # –£–≤–µ–ª–∏—á–∏—Ç—å –∫–µ—à –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```

### –†–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏–º–µ—Ä–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:
- **–ù–æ–≤–∞—è —Å–µ—Ç—å:** ~100 MB
- **–ú–µ—Å—è—Ü —Ä–∞–±–æ—Ç—ã (5 TPS):** ~1-5 GB
- **–ì–æ–¥ —Ä–∞–±–æ—Ç—ã (10 TPS):** ~50-100 GB

–†–µ–≥—É–ª—è—Ä–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ: `df -h /var/lib/docker/volumes/`

