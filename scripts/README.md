# üõ†Ô∏è –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–ª–æ–∫—á–µ–π–Ω–æ–º

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç —É—Ç–∏–ª–∏—Ç–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è production –±–ª–æ–∫—á–µ–π–Ω–æ–º.

## üì¶ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### 1. backup-blockchain.sh

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –≤—Å–µ—Ö Docker volumes –±–ª–æ–∫—á–µ–π–Ω–∞.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
./scripts/backup-blockchain.sh
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –°–æ–∑–¥–∞–µ—Ç –∞—Ä—Ö–∏–≤ –∫–∞–∂–¥–æ–π signer –Ω–æ–¥—ã (signer1-data, signer2-data, signer3-data)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (docker-compose.yml, genesis-poa.json, nginx.conf)
- –°–æ–∑–¥–∞–µ—Ç –µ–¥–∏–Ω—ã–π tar.gz –∞—Ä—Ö–∏–≤
- –£–¥–∞–ª—è–µ—Ç –±—ç–∫–∞–ø—ã —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π

**–ë—ç–∫–∞–ø—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:** `/backup/ethereum/blockchain-backup-TIMESTAMP.tar.gz`

---

### 2. restore-blockchain.sh

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫—á–µ–π–Ω–∞ –∏–∑ –±—ç–∫–∞–ø–∞.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
./scripts/restore-blockchain.sh /backup/ethereum/blockchain-backup-20251008_123456.tar.gz
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- –£–¥–∞–ª—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ Docker volumes
- –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –±—ç–∫–∞–ø–∞
- –ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–Ω–æ–≤–æ

**‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ:** –≠—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –±–ª–æ–∫—á–µ–π–Ω–∞!

---

### 3. health-check.sh

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –±–ª–æ–∫—á–µ–π–Ω–∞ –∏ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
./scripts/health-check.sh
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç:**
- ‚úÖ RPC connectivity
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤
- ‚úÖ –°—Ç–∞—Ç—É—Å Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- ‚úÖ Peer connections
- ‚úÖ –°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ

**–ê–ª–µ—Ä—Ç—ã:** –ú–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å webhook –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `ALERT_WEBHOOK`)

**–ü—Ä–∏–º–µ—Ä —Å –∞–ª–µ—Ä—Ç–∞–º–∏:**
```bash
ALERT_WEBHOOK="https://hooks.slack.com/..." ./scripts/health-check.sh
```

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Makefile

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ —É–¥–æ–±–Ω—ã–µ Make –∫–æ–º–∞–Ω–¥—ã:

```bash
make backup          # –ë—ç–∫–∞–ø –±–ª–æ–∫—á–µ–π–Ω–∞
make restore BACKUP=/path/to/backup.tar.gz  # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
make health          # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
```

## üìÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –±—ç–∫–∞–ø (cron)

–î–æ–±–∞–≤—å—Ç–µ –≤ crontab –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞ –≤ 2:00:

```bash
0 2 * * * /path/to/labracodabrador/scripts/backup-blockchain.sh >> /var/log/blockchain-backup.log 2>&1
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π health check

–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç:

```bash
*/5 * * * * /path/to/labracodabrador/scripts/health-check.sh >> /var/log/blockchain-health.log 2>&1
```

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### backup-blockchain.sh
- `BACKUP_ROOT` - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –±—ç–∫–∞–ø–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `/backup/ethereum`)
- `RETENTION_DAYS` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π —Ö—Ä–∞–Ω–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `7`)

### health-check.sh
- `RPC_URL` - URL RPC endpoint (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `http://localhost:8545`)
- `ALERT_WEBHOOK` - webhook –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### restore-blockchain.sh
- –ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

**üí° –°–æ–≤–µ—Ç:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ —Å–∫—Ä–∏–ø—Ç—ã –≤ production –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ –±—ã—Å—Ç—Ä–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è!
